# This is the configuration for Porter
# You must define steps for each action, but the rest is optional
# Uncomment out the sections below to take full advantage of what Porter can do!

mixins:
  - helm
  - exec 

credentials:
- name: SUBSCRIPTION_ID
  env: AZURE_SUBSCRIPTION_ID
- name: CLIENT_ID
  env: AZURE_CLIENT_ID
- name: TENANT_ID
  env: AZURE_TENANT_ID
- name: CLIENT_SECRET
  env: AZURE_CLIENT_SECRET
- name: kubeconfig
  path: /root/.kube/config

name: porter-cnab
version: 0.1.0
description: "Install Draft Boot and MySQL on Azure"
invocationImage: jeremyrickard/draft-boot-mysql:latest

install:
  - description: "Install Hello World"
    helm:
      name: draft-boot-mysql
      chart: /cnab/app/chart/draft-boot
      set:
        image.repository: "jeremyrickard/draft-boot"
        image.tag: "464adeff3f13a8d5760ef4bfe6da31d77ccc3bde" 
uninstall:
  - description: ""
    exec:
      command: echo
      args: 
       - "-c"
       - "echo Goodbye World"
#dependencies:
#  - name: mysql
#    parameters:
#      database-name: wordpress

